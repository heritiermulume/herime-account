â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸš€ COMMANDES DE DÃ‰PLOIEMENT SUR O2SWITCH - RÃ‰FÃ‰RENCE RAPIDE
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âš ï¸  IMPORTANT : O2Switch n'a PAS Node.js/NPM
   â†’ Compilez les assets sur votre machine locale (npm run build)
   â†’ TransfÃ©rez public/build/ via SCP/FTP (voir section COMPILATION ci-dessous)
   â†’ Consultez DEPLOY_SANS_NPM.md et PRODUCTION_VS_DEVELOPMENT.md pour plus de dÃ©tails
   
ğŸ’¡ EN PRODUCTION : Un seul serveur (Laravel via Nginx)
   â†’ Pas besoin de serveur Vite en production
   â†’ Les assets sont prÃ©-compilÃ©s et servis depuis public/build/

ğŸ“Š CRÃ‰ER LA BASE DE DONNÃ‰ES
   â†’ Via panneau O2Switch : "Bases de donnÃ©es" â†’ "CrÃ©er"
   â†’ Via SSH : mysql -u root -p â†’ CREATE DATABASE herime_account;
   â†’ Consultez CREATE_DATABASE_O2SWITCH.md pour plus de dÃ©tails

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“ DÃ‰PLOIEMENT INITIAL (AUTOMATIQUE - RECOMMANDÃ‰)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ssh votre-identifiant@o2switch.fr
cd www/votre-domaine.com
git clone https://github.com/heritiermulume/herime-account.git .
cp env.o2switch.example .env
nano .env  # Ã‰diter avec vos infos
chmod +x deploy-o2switch.sh
./deploy-o2switch.sh


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“ DÃ‰PLOIEMENT INITIAL (MANUEL)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ssh votre-identifiant@o2switch.fr
cd www/votre-domaine.com
git clone https://github.com/heritiermulume/herime-account.git .
cp env.o2switch.example .env
nano .env

composer install --no-dev --optimize-autoloader
php artisan key:generate
php artisan migrate --force
php artisan passport:install --force
php artisan db:seed --force
php artisan config:cache
php artisan route:cache
php artisan view:cache
php artisan optimize

chmod -R 755 storage bootstrap/cache public


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“ MISE Ã€ JOUR (APRÃˆS UN PUSH SUR GITHUB)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ssh votre-identifiant@o2switch.fr
cd www/votre-domaine.com

git pull origin main
composer install --no-dev --optimize-autoloader
php artisan migrate --force
php artisan config:cache
php artisan route:cache
php artisan view:cache
php artisan optimize


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“ COMPILATION DES ASSETS FRONTEND
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

# Si Node.js est disponible sur le serveur :
npm install --production
npm run build

# Sinon, compiler localement et transfÃ©rer :
# Sur votre machine :
npm run build
scp -r public/build/ utilisateur@o2switch.fr:www/votre-domaine.com/public/


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“ MIGRATIONS ET SEEDERS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

# Se connecter en SSH
ssh votre-identifiant@o2switch.fr
cd www/votre-domaine.com

# 1. VÃ©rifier le statut des migrations
php artisan migrate:status

# 2. ExÃ©cuter TOUTES les migrations
php artisan migrate --force

# 3. Installer Passport (si pas dÃ©jÃ  fait)
php artisan passport:install --force

# 4. ExÃ©cuter TOUS les seeders
php artisan db:seed --force

# 5. ExÃ©cuter un seeder spÃ©cifique (optionnel)
php artisan db:seed --class=DatabaseSeeder --force
php artisan db:seed --class=AdminSeeder --force

# 6. RÃ©initialiser la base (ATTENTION : supprime toutes les donnÃ©es)
php artisan migrate:fresh --force
php artisan passport:install --force
php artisan db:seed --force

# 7. RecrÃ©er TOUTES les migrations et seeders (mÃ©thode complÃ¨te)
# â†’ Consultez RECREER_MIGRATIONS_SEEDERS.md pour le guide complet

# 7. VÃ©rifier que tout est OK
php artisan migrate:status
php artisan db:show


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“ DÃ‰PANNAGE
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

# Erreur "Access denied" MySQL
# â†’ VÃ©rifier le fichier .env (remplacer votre_db_user par les vraies valeurs)
# â†’ Vider le cache : php artisan config:clear
# â†’ Consultez RESOUDRE_ERREUR_ACCESS_DENIED.md pour plus de dÃ©tails

# Erreur "Table already exists" (OAuth)
# â†’ Les tables OAuth existent mais les migrations ne sont pas marquÃ©es comme exÃ©cutÃ©es
# â†’ Solution : Marquer les migrations comme exÃ©cutÃ©es dans la table migrations
# â†’ Consultez RESOUDRE_ERREUR_TABLE_EXISTS.md pour plus de dÃ©tails

# Erreur migrations Passport en double (2025_11_03_*oauth*)
# â†’ Passport a crÃ©Ã© des migrations en double
# â†’ Solution : Supprimer les migrations 2025_11_03_*oauth*.php
# â†’ Commandes : rm database/migrations/2025_11_03_*oauth*.php
# â†’ Consultez CORRIGER_MIGRATIONS_PASSPORT.md pour plus de dÃ©tails

# Erreur "Table already exists" en production (oauth_*)
# â†’ Les tables OAuth existent mais Passport essaie de les recrÃ©er
# â†’ Solution : Marquer les migrations OAuth comme exÃ©cutÃ©es dans la table migrations
# â†’ Commandes : 
#    mysql -u votre_user_mysql -p herime_account -e "INSERT IGNORE INTO migrations (migration, batch) VALUES ('2016_06_01_000001_create_oauth_auth_codes_table', 1), ('2016_06_01_000002_create_oauth_access_tokens_table', 1), ('2016_06_01_000003_create_oauth_refresh_tokens_table', 1), ('2016_06_01_000004_create_oauth_clients_table', 1), ('2024_06_01_000001_create_oauth_device_codes_table', 1);"
# â†’ Consultez RESOUDRE_ERREUR_TABLE_EXISTS_PRODUCTION.md pour plus de dÃ©tails

# Erreur "Call to undefined function fake()" dans UserFactory
# â†’ La fonction fake() n'est pas disponible dans les factories
# â†’ Solution : Utiliser $this->faker au lieu de fake()
# â†’ Fichier corrigÃ© : database/factories/UserFactory.php

# Erreur 500 en production
# â†’ Erreur serveur gÃ©nÃ©rique, vÃ©rifier les logs en premier
# â†’ Commandes de diagnostic :
#    1. Voir les logs : tail -n 100 storage/logs/laravel.log
#    2. VÃ©rifier les permissions : ls -la storage bootstrap/cache
#    3. VÃ©rifier .env : cat .env | grep -E "APP_ENV|APP_DEBUG|APP_KEY"
#    4. Vider les caches : php artisan config:clear && php artisan cache:clear
#    5. VÃ©rifier la DB : php artisan migrate:status
# â†’ Consultez RESOUDRE_ERREUR_500_PRODUCTION.md pour plus de dÃ©tails

# Erreur "Vite manifest not found" en production
# â†’ Les assets frontend n'ont pas Ã©tÃ© compilÃ©s/transfÃ©rÃ©s
# â†’ Solution rapide :
#    Sur votre machine : npm run build
#    Puis : scp -r public/build/ muhe3594@persil.o2switch.fr:/home/muhe3594/herime-account/public/
#    OU utiliser FileZilla/Cyberduck pour transfÃ©rer public/build/ via FTP/SFTP
#    Sur O2Switch : php artisan view:clear
# â†’ Format O2Switch : VÃ©rifier dans votre panneau O2Switch (peut Ãªtre persil.o2switch.fr ou autre)
# â†’ Consultez RESOUDRE_ERREUR_VITE_MANIFEST.md et FORMAT_HOSTNAME_O2SWITCH.md

# Erreur "Server Error" lors de la connexion
# â†’ Erreur serveur lors de la tentative de connexion
# â†’ Diagnostic immÃ©diat :
#    1. Voir les logs : tail -n 100 storage/logs/laravel.log | grep -A 20 "ERROR"
#    2. VÃ©rifier Passport : php artisan passport:keys --force
#    3. VÃ©rifier la DB : php artisan migrate:status
#    4. Vider les caches : php artisan config:clear && php artisan cache:clear
# â†’ Causes courantes : ClÃ©s Passport manquantes, DB inaccessible, caches corrompus
# â†’ Consultez RESOUDRE_ERREUR_CONNEXION.md pour le guide complet

# Voir les logs
tail -f storage/logs/laravel.log

# VÃ©rifier les migrations
php artisan migrate:status

# VÃ©rifier la configuration de la base de donnÃ©es
php artisan db:show
cat .env | grep DB_

# Vider les caches
php artisan cache:clear
php artisan config:clear
php artisan route:clear
php artisan view:clear

# VÃ©rifier les permissions
ls -la storage bootstrap/cache


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“ VARIABLES IMPORTANTES .env
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

APP_ENV=production
APP_DEBUG=false
APP_URL=https://votre-domaine.com

DB_CONNECTION=mysql
DB_HOST=localhost
DB_DATABASE=herime_account
DB_USERNAME=user_o2switch
DB_PASSWORD=mot_de_passe_o2switch

MAIL_HOST=smtp.o2switch.net
MAIL_PORT=587


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“ IDENTIFIANTS PAR DÃ‰FAUT
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Email: admin@example.com
Mot de passe: password

âš ï¸  Changez-les immÃ©diatement aprÃ¨s le premier login !


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

