import{_ as $,u as j,a as L,b as S}from"./_plugin-vue_export-helper-CZ-xvY7I.js";import{r as M,d as C,w as B,q as l,v as t,x as k,y as f,z as _,A as c,B as x,C as g,F as H,D as b,E as s,G as y,H as T,I as O,J as z,K as V,p as E}from"./runtime-core.esm-bundler-D1ARzwY8.js";import{Transition as N}from"./vue.runtime.esm-bundler-DsD8H2A-.js";import"./pinia-D036F5w6.js";import"./index-DH5hsvb4.js";const I={name:"Sidebar",props:{mobileMenuOpen:{type:Boolean,default:!1}},emits:["update:mobileMenuOpen"],setup(o,{emit:e}){const a=j(),r=M(o.mobileMenuOpen),i=C(()=>a.user);return B(()=>o.mobileMenuOpen,d=>{r.value=d}),B(r,d=>{e("update:mobileMenuOpen",d)}),{mobileMenuOpen:r,user:i}}},D={class:"hidden md:flex md:w-64 md:flex-col md:fixed md:inset-y-0"},R={class:"flex-1 flex flex-col min-h-0 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700"},P={class:"flex-1 flex flex-col overflow-y-auto"},W={class:"flex-1 px-2 py-4 space-y-1"},q={key:0,class:"fixed inset-0 flex z-40 md:hidden"},F={class:"relative flex-1 flex flex-col max-w-xs w-full bg-white dark:bg-gray-800"},U={class:"absolute top-0 right-0 -mr-12 pt-2"},G={class:"flex-1 h-0 pt-5 pb-4 overflow-y-auto"},J={class:"mt-5 px-2 space-y-1"};function K(o,e,a,r,i,d){const n=b("router-link");return s(),l(H,null,[t("div",D,[t("div",R,[e[13]||(e[13]=t("div",{class:"flex items-center h-16 flex-shrink-0 px-4",style:{"background-color":"#003366"}},[t("img",{src:"/logo.png",alt:"HERIME Logo",class:"h-8 w-auto"})],-1)),t("div",P,[t("nav",W,[f(n,{to:"/dashboard",class:g(["group flex items-center px-2 py-2 text-sm font-medium rounded-md transition-colors duration-200",o.$route.path==="/dashboard"?"text-white":"text-gray-600 hover:bg-gray-50 hover:text-gray-900 dark:text-gray-300 dark:hover:bg-gray-700 dark:hover:text-white"]),style:x(o.$route.path==="/dashboard"?"background-color: #ffcc33; color: #003366;":"")},{default:c(()=>[...e[7]||(e[7]=[t("svg",{class:"mr-3 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 5a2 2 0 012-2h4a2 2 0 012 2v2H8V5z"})],-1),y(" Accueil ",-1)])]),_:1},8,["class","style"]),f(n,{to:"/profile",class:g(["group flex items-center px-2 py-2 text-sm font-medium rounded-md transition-colors duration-200",o.$route.path==="/profile"?"text-white":"text-gray-600 hover:bg-gray-50 hover:text-gray-900 dark:text-gray-300 dark:hover:bg-gray-700 dark:hover:text-white"]),style:x(o.$route.path==="/profile"?"background-color: #ffcc33; color: #003366;":"")},{default:c(()=>[...e[8]||(e[8]=[t("svg",{class:"mr-3 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1),y(" Profil ",-1)])]),_:1},8,["class","style"]),f(n,{to:"/security",class:g(["group flex items-center px-2 py-2 text-sm font-medium rounded-md transition-colors duration-200",o.$route.path==="/security"?"text-white":"text-gray-600 hover:bg-gray-50 hover:text-gray-900 dark:text-gray-300 dark:hover:bg-gray-700 dark:hover:text-white"]),style:x(o.$route.path==="/security"?"background-color: #ffcc33; color: #003366;":"")},{default:c(()=>[...e[9]||(e[9]=[t("svg",{class:"mr-3 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})],-1),y(" Sécurité ",-1)])]),_:1},8,["class","style"]),f(n,{to:"/notifications",class:g(["group flex items-center px-2 py-2 text-sm font-medium rounded-md transition-colors duration-200",o.$route.path==="/notifications"?"text-white":"text-gray-600 hover:bg-gray-50 hover:text-gray-900 dark:text-gray-300 dark:hover:bg-gray-700 dark:hover:text-white"]),style:x(o.$route.path==="/notifications"?"background-color: #ffcc33; color: #003366;":"")},{default:c(()=>[...e[10]||(e[10]=[t("svg",{class:"mr-3 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-5 5v-5zM4.828 7l2.586 2.586a2 2 0 002.828 0L12 7H4.828zM4.828 17l2.586-2.586a2 2 0 012.828 0L12 17H4.828z"})],-1),y(" Notifications ",-1)])]),_:1},8,["class","style"]),f(n,{to:"/about",class:g(["group flex items-center px-2 py-2 text-sm font-medium rounded-md transition-colors duration-200",o.$route.path==="/about"?"text-white":"text-gray-600 hover:bg-gray-50 hover:text-gray-900 dark:text-gray-300 dark:hover:bg-gray-700 dark:hover:text-white"]),style:x(o.$route.path==="/about"?"background-color: #ffcc33; color: #003366;":"")},{default:c(()=>[...e[11]||(e[11]=[t("svg",{class:"mr-3 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),y(" À propos ",-1)])]),_:1},8,["class","style"]),r.user&&r.user.role==="super_user"?(s(),_(n,{key:0,to:"/admin/dashboard",class:g(["group flex items-center px-2 py-2 text-sm font-medium rounded-md transition-colors duration-200",o.$route.path.startsWith("/admin")?"text-white":"text-gray-600 hover:bg-gray-50 hover:text-gray-900 dark:text-gray-300 dark:hover:bg-gray-700 dark:hover:text-white"]),style:x(o.$route.path.startsWith("/admin")?"background-color: #ffcc33; color: #003366;":"")},{default:c(()=>[...e[12]||(e[12]=[t("svg",{class:"mr-3 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})],-1),y(" Administration ",-1)])]),_:1},8,["class","style"])):k("",!0)])])])]),r.mobileMenuOpen?(s(),l("div",q,[t("div",{class:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:e[0]||(e[0]=h=>r.mobileMenuOpen=!1)}),t("div",F,[t("div",U,[t("button",{onClick:e[1]||(e[1]=h=>r.mobileMenuOpen=!1),class:"ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white"},[...e[14]||(e[14]=[t("svg",{class:"h-6 w-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",G,[e[20]||(e[20]=t("div",{class:"flex-shrink-0 flex items-center px-4"},[t("img",{src:"/logo.png",alt:"HERIME Logo",class:"h-8 w-auto"})],-1)),t("nav",J,[f(n,{to:"/dashboard",onClick:e[2]||(e[2]=h=>r.mobileMenuOpen=!1),class:g(["group flex items-center px-2 py-2 text-base font-medium rounded-md",o.$route.path==="/dashboard"?"text-white":"text-gray-600 hover:bg-gray-50 hover:text-gray-900 dark:text-gray-300 dark:hover:bg-gray-700 dark:hover:text-white"])},{default:c(()=>[...e[15]||(e[15]=[t("svg",{class:"mr-4 h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 5a2 2 0 012-2h4a2 2 0 012 2v2H8V5z"})],-1),y(" Accueil ",-1)])]),_:1},8,["class"]),f(n,{to:"/profile",onClick:e[3]||(e[3]=h=>r.mobileMenuOpen=!1),class:g(["group flex items-center px-2 py-2 text-base font-medium rounded-md",o.$route.path==="/profile"?"text-white":"text-gray-600 hover:bg-gray-50 hover:text-gray-900 dark:text-gray-300 dark:hover:bg-gray-700 dark:hover:text-white"])},{default:c(()=>[...e[16]||(e[16]=[t("svg",{class:"mr-4 h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1),y(" Profil ",-1)])]),_:1},8,["class"]),f(n,{to:"/security",onClick:e[4]||(e[4]=h=>r.mobileMenuOpen=!1),class:g(["group flex items-center px-2 py-2 text-base font-medium rounded-md",o.$route.path==="/security"?"text-white":"text-gray-600 hover:bg-gray-50 hover:text-gray-900 dark:text-gray-300 dark:hover:bg-gray-700 dark:hover:text-white"])},{default:c(()=>[...e[17]||(e[17]=[t("svg",{class:"mr-4 h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})],-1),y(" Sécurité ",-1)])]),_:1},8,["class"]),f(n,{to:"/notifications",onClick:e[5]||(e[5]=h=>r.mobileMenuOpen=!1),class:g(["group flex items-center px-2 py-2 text-base font-medium rounded-md",o.$route.path==="/notifications"?"text-white":"text-gray-600 hover:bg-gray-50 hover:text-gray-900 dark:text-gray-300 dark:hover:bg-gray-700 dark:hover:text-white"])},{default:c(()=>[...e[18]||(e[18]=[t("svg",{class:"mr-4 h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-5 5v-5zM4.828 7l2.586 2.586a2 2 0 002.828 0L12 7H4.828zM4.828 17l2.586-2.586a2 2 0 012.828 0L12 17H4.828z"})],-1),y(" Notifications ",-1)])]),_:1},8,["class"]),f(n,{to:"/about",onClick:e[6]||(e[6]=h=>r.mobileMenuOpen=!1),class:g(["group flex items-center px-2 py-2 text-base font-medium rounded-md",o.$route.path==="/about"?"text-white":"text-gray-600 hover:bg-gray-50 hover:text-gray-900 dark:text-gray-300 dark:hover:bg-gray-700 dark:hover:text-white"])},{default:c(()=>[...e[19]||(e[19]=[t("svg",{class:"mr-4 h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),y(" À propos ",-1)])]),_:1},8,["class"])])])])])):k("",!0)],64)}const Q=$(I,[["render",K]]),X={name:"MobileNavigation",setup(){const o=j();return{user:C(()=>o.user)}}},Y={class:"md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 z-50"},Z={class:"flex justify-around items-center py-2"};function ee(o,e,a,r,i,d){const n=b("router-link");return s(),l("div",Y,[t("nav",Z,[f(n,{to:"/dashboard",class:g(["flex flex-col items-center py-2 px-3 rounded-lg transition-colors duration-200",o.$route.path==="/dashboard"?"text-white":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"]),style:x(o.$route.path==="/dashboard"?"background-color: #ffcc33; color: #003366;":"")},{default:c(()=>[...e[0]||(e[0]=[t("svg",{class:"h-6 w-6 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 5a2 2 0 012-2h4a2 2 0 012 2v2H8V5z"})],-1),t("span",{class:"text-xs font-medium"},"Accueil",-1)])]),_:1},8,["class","style"]),f(n,{to:"/profile",class:g(["flex flex-col items-center py-2 px-3 rounded-lg transition-colors duration-200",o.$route.path==="/profile"?"text-white":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"]),style:x(o.$route.path==="/profile"?"background-color: #ffcc33; color: #003366;":"")},{default:c(()=>[...e[1]||(e[1]=[t("svg",{class:"h-6 w-6 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1),t("span",{class:"text-xs font-medium"},"Profil",-1)])]),_:1},8,["class","style"]),f(n,{to:"/security",class:g(["flex flex-col items-center py-2 px-3 rounded-lg transition-colors duration-200",o.$route.path==="/security"?"text-white":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"]),style:x(o.$route.path==="/security"?"background-color: #ffcc33; color: #003366;":"")},{default:c(()=>[...e[2]||(e[2]=[t("svg",{class:"h-6 w-6 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})],-1),t("span",{class:"text-xs font-medium"},"Sécurité",-1)])]),_:1},8,["class","style"]),f(n,{to:"/notifications",class:g(["flex flex-col items-center py-2 px-3 rounded-lg transition-colors duration-200",o.$route.path==="/notifications"?"text-white":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"]),style:x(o.$route.path==="/notifications"?"background-color: #ffcc33; color: #003366;":"")},{default:c(()=>[...e[3]||(e[3]=[t("svg",{class:"h-6 w-6 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-5 5v-5zM4.828 7l2.586 2.586a2 2 0 002.828 0L12 7H4.828zM4.828 17l2.586-2.586a2 2 0 012.828 0L12 17H4.828z"})],-1),t("span",{class:"text-xs font-medium"},"Notifications",-1)])]),_:1},8,["class","style"]),f(n,{to:"/about",class:g(["flex flex-col items-center py-2 px-3 rounded-lg transition-colors duration-200",o.$route.path==="/about"?"text-white":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"]),style:x(o.$route.path==="/about"?"background-color: #ffcc33; color: #003366;":"")},{default:c(()=>[...e[4]||(e[4]=[t("svg",{class:"h-6 w-6 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),t("span",{class:"text-xs font-medium"},"À propos",-1)])]),_:1},8,["class","style"]),r.user&&r.user.role==="super_user"?(s(),_(n,{key:0,to:"/admin/dashboard",class:g(["flex flex-col items-center py-2 px-3 rounded-lg transition-colors duration-200",o.$route.path.startsWith("/admin/")?"text-white":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"]),style:x(o.$route.path.startsWith("/admin/")?"background-color: #ffcc33; color: #003366;":"")},{default:c(()=>[...e[5]||(e[5]=[t("svg",{class:"h-6 w-6 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})],-1),t("span",{class:"text-xs font-medium"},"Admin",-1)])]),_:1},8,["class","style"])):k("",!0)])])}const te=$(X,[["render",ee]]),oe={name:"Toast",props:{type:{type:String,default:"info",validator:o=>["success","error","info","warning"].includes(o)},title:{type:String,required:!0},message:{type:String,default:""},duration:{type:Number,default:5e3}},emits:["close"],setup(o,{emit:e}){const a=M(!0);let r=null;const i=()=>{a.value=!1,setTimeout(()=>{e("close")},300)};return T(()=>{o.duration>0&&(r=setTimeout(i,o.duration))}),O(()=>{r&&clearTimeout(r)}),{show:a,close:i}}},re={key:0,class:"fixed top-4 right-4 z-50 max-w-sm w-full bg-white dark:bg-gray-800 shadow-lg rounded-lg pointer-events-auto ring-1 ring-black ring-opacity-5 overflow-hidden"},se={class:"p-4"},ae={class:"flex items-start"},ne={class:"flex-shrink-0"},le={key:0,class:"h-6 w-6",style:{color:"#10b981"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ie={key:1,class:"h-6 w-6",style:{color:"#ef4444"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},de={key:2,class:"h-6 w-6",style:{color:"#ffcc33"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ue={class:"ml-3 w-0 flex-1 pt-0.5"},ce={class:"text-sm font-medium text-gray-900 dark:text-white"},ge={key:0,class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},he={class:"ml-4 flex-shrink-0 flex"};function fe(o,e,a,r,i,d){return s(),_(N,{"enter-active-class":"transform ease-out duration-300 transition","enter-from-class":"translate-y-2 opacity-0 sm:translate-y-0 sm:translate-x-2","enter-to-class":"translate-y-0 opacity-100 sm:translate-x-0","leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:c(()=>[r.show?(s(),l("div",re,[t("div",se,[t("div",ae,[t("div",ne,[a.type==="success"?(s(),l("svg",le,[...e[1]||(e[1]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])])):a.type==="error"?(s(),l("svg",ie,[...e[2]||(e[2]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])])):(s(),l("svg",de,[...e[3]||(e[3]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])]))]),t("div",ue,[t("p",ce,z(a.title),1),a.message?(s(),l("p",ge,z(a.message),1)):k("",!0)]),t("div",he,[t("button",{onClick:e[0]||(e[0]=(...n)=>r.close&&r.close(...n)),class:"bg-white dark:bg-gray-800 rounded-md inline-flex text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2",style:{focus:"ring-color: #003366"}},[...e[4]||(e[4]=[t("span",{class:"sr-only"},"Fermer",-1),t("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])])])])])])):k("",!0)]),_:1})}const me=$(oe,[["render",fe]]),pe={name:"ToastContainer",components:{Toast:me},setup(){const o=M([]);let e=1;const a=u=>{const m=e++;o.value.push({id:m,type:u.type||"info",title:u.title,message:u.message||"",duration:u.duration||5e3})};return{toasts:o,addToast:a,removeToast:u=>{const m=o.value.findIndex(w=>w.id===u);m>-1&&o.value.splice(m,1)},success:(u,m="")=>{a({type:"success",title:u,message:m})},error:(u,m="")=>{a({type:"error",title:u,message:m})},info:(u,m="")=>{a({type:"info",title:u,message:m})},warning:(u,m="")=>{a({type:"warning",title:u,message:m})}}}},xe={class:"fixed top-4 right-4 z-50 space-y-2"};function ye(o,e,a,r,i,d){const n=b("Toast");return s(),l("div",xe,[(s(!0),l(H,null,V(r.toasts,h=>(s(),_(n,{key:h.id,type:h.type,title:h.title,message:h.message,duration:h.duration,onClose:u=>r.removeToast(h.id)},null,8,["type","title","message","duration","onClose"]))),128))])}const ve=$(pe,[["render",ye]]),ke={name:"App",components:{Sidebar:Q,MobileNavigation:te,ToastContainer:ve},setup(){const o=S(),e=L(),a=j(),r=M(!1),i=M(!1),d=M(null),n=C(()=>a.user);E("notify",{success:(p,v="")=>{d.value&&d.value.success(p,v)},error:(p,v="")=>{d.value&&d.value.error(p,v)},info:(p,v="")=>{d.value&&d.value.info(p,v)},warning:(p,v="")=>{d.value&&d.value.warning(p,v)}});const u=C(()=>({"/dashboard":"Accueil","/profile":"Profil","/security":"Sécurité","/notifications":"Notifications","/about":"À propos"})[e.path]||"HERIME"),m=C(()=>e.path!=="/dashboard"),w=()=>{i.value=!i.value,document.documentElement.classList.toggle("dark",i.value),localStorage.setItem("darkMode",i.value)},A=async()=>{r.value=!0;try{await a.logout(),o.push("/login")}catch(p){console.error("Logout error:",p)}finally{r.value=!1}};return T(async()=>{console.log("App mounted"),console.log("Initial user:",a.user),console.log("Initial authenticated:",a.authenticated),console.log("Current route:",e.path);const p=localStorage.getItem("darkMode");if(p!==null?(i.value=p==="true",document.documentElement.classList.toggle("dark",i.value)):(i.value=window.matchMedia("(prefers-color-scheme: dark)").matches,document.documentElement.classList.toggle("dark",i.value)),e.meta.requiresAuth)try{await a.checkAuth()||(console.log("User not authenticated, redirecting to login"),o.push("/login"))}catch(v){console.error("Auth check error:",v),o.push("/login")}}),{loading:r,isDarkMode:i,user:n,pageTitle:u,showPageTitle:m,toggleDarkMode:w,logout:A,authStore:a,toastContainer:d}}},we={id:"app",class:"min-h-screen bg-gray-50 dark:bg-gray-900"},be={key:0,class:"min-h-screen flex items-center justify-center"},Me={key:1,class:"min-h-screen"},_e={key:0,class:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700"},Ce={class:"px-4 sm:px-6 lg:px-8"},ze={class:"flex justify-between h-16"},$e={class:"flex items-center"},je={class:"ml-4 flex items-center"},Be={key:0,src:"/logo.png",alt:"HERIME Logo",class:"h-8 w-auto md:hidden"},He={key:1,class:"text-xl font-semibold",style:{color:"#ffcc33"}},Te={key:2,class:"text-xl font-semibold hidden md:block",style:{color:"#ffcc33"}},Ae={class:"flex items-center space-x-4"},Le={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Se={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Oe={class:"flex items-center space-x-3"},Ve={key:0,class:"h-8 w-8 rounded-full overflow-hidden"},Ee=["src","alt"],Ne={key:1,class:"h-8 w-8 rounded-full flex items-center justify-center",style:{"background-color":"#ffcc33"}},Ie={class:"h-5 w-5",style:{color:"#003366"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},De={class:"text-sm font-medium text-gray-700 dark:text-gray-300"},Re={class:"flex-1 py-6 pb-20 md:pb-6"},Pe={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"};function We(o,e,a,r,i,d){const n=b("Sidebar"),h=b("router-view"),u=b("MobileNavigation"),m=b("ToastContainer");return s(),l("div",we,[r.loading?(s(),l("div",be,[...e[2]||(e[2]=[t("div",{class:"bg-white dark:bg-gray-800 rounded-lg p-6 flex items-center space-x-3"},[t("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2",style:{"border-color":"#003366"}}),t("span",{class:"text-gray-700 dark:text-gray-300"},"Chargement...")],-1)])])):(s(),l("div",Me,[r.user?(s(),_(n,{key:0})):k("",!0),t("div",{class:g([r.user?"md:pl-64":"","flex flex-col flex-1"])},[r.user?(s(),l("nav",_e,[t("div",Ce,[t("div",ze,[t("div",$e,[t("div",je,[r.pageTitle==="Accueil"?(s(),l("img",Be)):(s(),l("h1",He,z(r.pageTitle),1)),r.pageTitle==="Accueil"?(s(),l("h1",Te,z(r.pageTitle),1)):k("",!0)])]),t("div",Ae,[t("button",{onClick:e[0]||(e[0]=(...w)=>r.toggleDarkMode&&r.toggleDarkMode(...w)),class:"p-2 rounded-lg text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"},[r.isDarkMode?(s(),l("svg",Se,[...e[4]||(e[4]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"},null,-1)])])):(s(),l("svg",Le,[...e[3]||(e[3]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"},null,-1)])]))]),t("div",Oe,[r.user.avatar_url?(s(),l("div",Ve,[t("img",{src:r.user.avatar_url,alt:r.user.name,class:"h-full w-full object-cover"},null,8,Ee)])):(s(),l("div",Ne,[(s(),l("svg",Ie,[...e[5]||(e[5]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"},null,-1)])]))])),t("span",De,z(r.user.name),1),t("button",{onClick:e[1]||(e[1]=(...w)=>r.logout&&r.logout(...w)),class:"text-sm text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}," Déconnexion ")])])])])])):k("",!0),t("main",Re,[t("div",Pe,[f(h)])])],2)])),r.user&&!o.$route.path.startsWith("/admin")?(s(),_(u,{key:2})):k("",!0),f(m,{ref:"toastContainer"},null,512)])}const Ke=$(ke,[["render",We]]);export{Ke as default};
